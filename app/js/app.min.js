document.addEventListener("DOMContentLoaded",(function(){startAppend()}));let amountQestionsIndex=0;const qestionsArr=[{title:"title1",q:["question1","question2","question3"]},{title:"title2",q:["question1","question2","question3"]},{title:"title3",q:["question1","question2","question3"]},{title:"title4",q:["question1","question2","question3"]},{title:"title5",q:["question1","question2","question3"]},{title:"title6",q:["question1","question2","question3"]}],startAppend=()=>{if(document.querySelector(".test-container")){const e=JSON.parse(localStorage.getItem("test"));amountQestionsIndex=e?findIndex():0,appendElement(amountQestionsIndex)}},findIndex=()=>{const e=Object.keys(JSON.parse(localStorage.getItem("test")));e.sort((e,t)=>e-t);for(let t=0;t<qestionsArr.length;t++)if(t!==+e[t])return t},appendElement=e=>{const t=document.querySelector(".test-container");t.innerHTML="",amountQestionsIndex=e,t.appendChild(addScreenElement(setTemplate(qestionsArr[amountQestionsIndex])))},addScreenElement=e=>{const t=document.createElement("div");return t.innerHTML=e.trim(),t},setTemplate=e=>(template=e?questionsTemplate(e):endTestTemplate(),template),questionsTemplate=e=>`<h1>${e.title}</h1>\n<form onsubmit="getFormData();return false" id="qForm">\n  ${questions(e)} \n<button type="submit" class="btn--primary"> Ответить </button>\n<a href="./index.html" class="btn btn--primary">На главную</a>\n</form>\n`,endTestTemplate=()=>'\n<p>Тест завершен</p>\n<a href="./index.html" class="btn btn--primary">На главную</a>\n<button class="btn--primary" onclick="clearTest()"> Пройти снова </button>\n ',questions=e=>{let t="";for(let n=0;n<e.q.length;n++)t+=`<input\n    type="radio"\n    id="question${n}"\n    name="question"\n    value="answer${n}"\n    class="btn--radio btn--radio--label"\n  />\n  <label for="question${n}">${e.q[n]}</label> `;return t},getFormData=()=>{document.getElementById("qForm").querySelectorAll('input[type="radio"]').forEach(e=>{if(e.checked){let t={};JSON.parse(localStorage.getItem("test"))&&(t=JSON.parse(localStorage.getItem("test"))),t[amountQestionsIndex]=e.value,localStorage.setItem("test",JSON.stringify(t)),nextPeage()}})},prewPage=()=>{amountQestionsIndex>0&&appendElement(amountQestionsIndex-1)},nextPeage=()=>{amountQestionsIndex<qestionsArr.length&&appendElement(amountQestionsIndex+1)},clearTest=()=>{localStorage.clear(),startAppend()};